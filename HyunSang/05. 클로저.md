# Chapter 05. í´ë¡œì €

---

# 5-1 í´ë¡œì €ì˜ ì˜ë¯¸ ë° ì›ë¦¬ ì´í•´

---

í´ë¡œì €: ì–´ë–¤ í•¨ìˆ˜ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ aë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€í•¨ìˆ˜ë¥¼ ì™¸ë¶€ë¡œ ì „ë‹¬í•  ê²½ìš° ì™¸ë¶€í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ ì´í›„ì—ë„ ë³€ìˆ˜ aê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” í˜„ìƒ

> ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ (1)
> 

```jsx
var outer = function () {
	var a = 1;
	var inner = function() {
		console.log(++a);
	};
	inner();
};
outer();
```

inner í•¨ìˆ˜ì— aë¥¼ ì„ ì–¸í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— environmentRecordì—ì„œ ê°’ì„ ì°¾ì§€ ëª»í•˜ì—¬ 

â†’ outerEnvironmentReferenceì— ì§€ì •ëœ ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ì¸ outerì˜ LexicalEnvironmentì— ì ‘ê·¼í•˜ì—¬ a ì°¾ìŒ

outer í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œë˜ë©´ LexicalEnvironmentì— ì €ì¥ëœ ì‹ë³„ìë“¤ (a, inner)ì— ëŒ€í•œ ì°¸ì¡° ì§€ì›€

ê·¸ëŸ¬ë©´ ê° ì£¼ì†Œì— ì €ì¥ë¼ ìˆë˜ ê°’ë“¤ì€ ìì‹ ì„ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ê°€ í•˜ë‚˜ë„ ì—†ê²Œ ë˜ë¯€ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰í„° ìˆ˜ì§‘ ëŒ€ìƒ

> ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ (3)
> 

```jsx
var outer = function () {   // ì™¸ë¶€ í•¨ìˆ˜
  var a = 1;
  var inner = function () { // ë‚´ë¶€ í•¨ìˆ˜
    return ++a;
  };
  return inner();
};
var outer2 = outer();
console.log(outer2()); // 2
console.log(outer2()); // 3
```

(1) ì½”ë“œì™€ ë‹¤ë¥¸ì ì€ return ë°©ë²•ì´ inner í•¨ìˆ˜ ìì²´ë¥¼ ë°˜í™˜í•¨.

(3)ì˜ outer í•¨ìˆ˜ëŠ” ì‹¤í–‰ ì¢…ë£Œ ì‹œì ì— inner í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. ì™¸ë¶€í•¨ìˆ˜ì¸ outerì˜ ì‹¤í–‰ì´ ì¢…ë£Œë˜ë”ë¼ë„ ë‚´ë¶€ í•¨ìˆ˜ì¸ innerí•¨ìˆ˜ê°€ ì–¸ì  ê°€ outer2ë¥¼ ì‹¤í–‰í•¨ìœ¼ë¡œì¨ í˜¸ì¶œë  ê°€ëŠ¥ì„±ì´ ì—´ë ¤ì„œ, innerí•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ í™œì„±í™” ë˜ë©´ outerEnvironmentReferenceê°€ outer í•¨ìˆ˜ì˜ LexcialEnvironmentë¥¼ í•„ìš”ë¡œ í• ê²ƒì´ë¯€ë¡œ ìˆ˜ì§‘ ëŒ€ìƒì—ì„œ ì œì™¸ ëœë‹¤.

(1)ì€ outerì˜ LexicalEnvironmentì— ì†í•˜ëŠ” ë³€ìˆ˜ê°€ ëª¨ë‘ ê°€ë¹„ì§€ ì»¬ë ‰íŒ… ëŒ€ìƒì— í¬í•¨ë˜ì§€ë§Œ, (3)ì˜ ê²½ìš° ë³€ìˆ˜ aê°€ ëŒ€ìƒì—ì„œ ì œì™¸ë˜ì—ˆë‹¤.

# 5-2 í´ë¡œì €ì™€ ë©”ëª¨ë¦¬ ê´€ë¦¬

---

**ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**Â : ê°œë°œìì˜ ì˜ë„ì™€ ë‹¬ë¦¬Â **ì–´ë–¤ ê°’ì˜ ì°¸ì¡° ì¹´ìš´íŠ¸ê°€ 0ì´ ë˜ì§€ ì•Šì•„**Â ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ìˆ˜ê±° ëŒ€ìƒì´ ë˜ì§€ ì•ŠëŠ” ê²½ìš°

**ë©”ëª¨ë¦¬ ì†Œëª¨**Â : í´ë¡œì €ì˜ ë³¸ì§ˆì ì¸ íŠ¹ì„± (ì˜ë„ ëŒ€ë¡œ ì„¤ê³„í•œÂ **ë©”ëª¨ë¦¬ ì†Œëª¨**ì— ëŒ€í•œ ê´€ë¦¬ë²•ë§Œ ì˜ íŒŒì•…í•´ì„œ ì ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶©ë¶„)

- ê´€ë¦¬ë²• : í•„ìš”ì„±ì´ ì‚¬ë¼ì§„ ì‹œì ì— ë©”ëª¨ë¦¬ë¥¼ ì°¨ì§€í•˜ì§€ ì•Šë„ë¡ ì°¸ì¡° ì¹´ìš´íŠ¸ë¥¼ 0ìœ¼ë¡œ ë§Œë“ ë‹¤!â‡’ ì°¸ì¡° ì¹´ìš´íŠ¸ 0ìœ¼ë¡œ ë§Œë“œëŠ” ë°©ë²• : ì‹ë³„ìì— ì°¸ì¡°í˜•ì´ ì•„ë‹ŒÂ **ê¸°ë³¸í˜• ë°ì´í„°(null, undefined) í• ë‹¹**

# 5-3 í´ë¡œì € í™œìš© ì‚¬ë¡€

---

## 5-3-1 ì½œë°±í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì™¸ë¶€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³ ì í•  ë•Œ

---

> ì½œë°± í•¨ìˆ˜ë¥¼ ë‚´ë¶€í•¨ìˆ˜ë¡œ ì„ ì–¸í•´ì„œ ì™¸ë¶€ë³€ìˆ˜ë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ëŠ” ë°©ë²•
> 

```jsx
var fruits = ['apple', 'banana', 'peach'];
var $ul = document.createElement('ul'); // (ê³µí†µ ì½”ë“œ)

fruits.forEach(function (fruit){ // (A)
	var $li = document.createElement('li'); 
	$li.innerText = fruit;
	$li.addEventListener('click', function) (){ // (B)
		alert('your choice is ' + fruit); // í´ë¡œì € o
	});
	$ul.appendChild($li);
});
document.body.appendChild($ul);
```

> bind ë©”ì„œë“œë¡œ ê°’ì„ ì§ì ‘ ë„˜ê¹€ (í´ë¡œì € ì‚¬ìš© x, ì œì•½ì‚¬í•­)
> 

```jsx
**...
fruits.forEach(function (fruit){
	var $li = document.createElement('li');
	$li.innerText = fruit;
	$li.addEventLis**tener('click', alertFruit.bind(null, fruit));
	$ul.appendChild($li);
});
...
```

> ì½œë°± í•¨ìˆ˜ â†’ ê³ ì°¨í•¨ìˆ˜ ë³€ê²½í•˜ì—¬ ì‚¬ìš©  (í´ë¡œì € ì ê·¹ì ìœ¼ë¡œ í™œìš©)
> 

```jsx
var alertFruitBuilder = function (fruit) {
	return function () {
		alert('your choice is ' + fruit);
	};
};
fruits.forEach(function (fruit){
	var $li = document.createElement('li');
	$li.innerText = fruit;
	$li.addEventListener('click', alertFruitbuilder(fruit));
	$ul.appendChild($li);
});
...
```

## 5-3-2 ì ‘ê·¼ ê¶Œí•œ ì œì–´ (ì •ë³´ ì€ë‹‰)

---

ì •ë³´ ì€ë‹‰: ì–´ë–¤ ëª¨ë“ˆì˜ ë‚´ë¶€ ë¡œì§ì— ëŒ€í•´ ì™¸ë¶€ë¡œì˜ ë…¸ì¶œì„ ìµœì†Œí™”í•´ì„œ ëª¨ë“ˆê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  ìœ ì—°ì„±ì„ ë†’ì´ê³ ì í•˜ëŠ” ê²ƒ

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë³€ìˆ˜ ìì²´ì— ì´ëŸ¬í•œ ì ‘ê·¼ ê¶Œí•œ ì§ì ‘ ë¶€ì—¬í•˜ì§€ ëª»í•¨

í´ë¡œì €ë¥¼ ì´ìš©í•˜ë©´ í•¨ìˆ˜ ì°¨ì›ì—ì„œ public í•œ ê°’ê³¼ privateí•œ ê°’ì„ êµ¬ë¶„ ê°€ëŠ¥.

â†’ returnì„ í™œìš©í•˜ì—¬ ì™¸ë¶€ ìŠ¤ì½”í”„ì—ì„œ í•¨ìˆ˜ ë‚´ë¶€ì˜ ë³€ìˆ˜ë“¤ ì¤‘ ì„ íƒì ìœ¼ë¡œ ì¼ë¶€ì˜ ë³€ìˆ˜ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬

returní•œ ë³€ìˆ˜ë“¤ì€ ê³µê°œ ë©¤ë²„, ê·¸ë ‡ì§€ ì•Šì€ ë³€ìˆ˜ë“¤ì€ ë¹„ê³µê°œ ë©¤ë²„ë¼ê³  í•¨.

> í´ë¡œì €ë¡œ ë³€ìˆ˜ë¥¼ ë³´í˜¸í•œ ìë™ì°¨ ê°ì²´
> 

```jsx
var createCar = function() {
	var fuel = Math.ceil(Math.random() * 10 + 10); // ì—°ë£Œ(L)
	var power = Math.ceil(Math.random() * 3 + 2); // ì—°ë¹„(km/L)
	var moved = 0;
	return {
		get moved() {
			return moved;
		}
		run: function () {
		var km = Math.ceil(Math.random() * 6);
		var wasteFuel = km / this.power;
		if (this.fuel < wasteFuel) {
			console.log('ì´ë™ë¶ˆê°€');
			return;
		}
		this.fuel -= wasteFuel;
		this.moved += km;
		console.log(km + 'km ì´ë™ (ì´ ' + moved + 'km). ë‚¨ì€ ì—°ë£Œ: ' + fuel);
	}
	};
};
var car = createCar();
```

> í´ë¡œì €ë¡œ ë³€ìˆ˜ë¥¼ ë³´í˜¸í•œ ìë™ì°¨ ê°ì²´(2)
> 

```jsx
var createCar = functuin() {
	...
	var publicMembers = {
		...
	};
	Object.freeze(publicMembers);
	return publicMembers;
}

// return í•˜ê¸°ì „ì— ë¯¸ë¦¬ ë³€ê²½í•  ìˆ˜ ì—†ê²Œ í•˜ëŠ” ë°©ë²•
```

ì ‘ê·¼ ê¶Œí•œ ì œì–´ ë°©ë²•

1. í•¨ìˆ˜ì—ì„œ ì§€ì—­ë³€ìˆ˜ ë° ë‚´ë¶€í•¨ìˆ˜ ìƒì„±
2.  ì™¸ë¶€ì— ì ‘ê·¼ê¶Œí•œì„ ì£¼ê³ ì í•˜ëŠ” ëŒ€ìƒë“¤ë¡œ êµ¬ì„±ëœ ì°¸ì¡°í˜• ë°ì´í„° (ëŒ€ìƒì´ ì—¬ëŸ¿ì¼ ë•ŒëŠ” ê°ì²´ ë˜ëŠ” ë°°ì—´, í•˜ë‚˜ì¼ ë•ŒëŠ” í•¨ìˆ˜)ë¥¼ return í•œë‹¤.

â†’ returní•œ ë³€ìˆ˜ë“¤ì€ ê³µê°œ ë©¤ë²„ê°€ ë˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ë³€ìˆ˜ë“¤ì€ ë¹„ê³µê°œ ë©¤ë²„ê°€ ë¨.

## 5-3-3 ë¶€ë¶„ ì ìš© í•¨ìˆ˜

---

ë¶€ë¶„ ì ìš© í•¨ìˆ˜: nê°œì˜ ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ì— ë¯¸ë¦¬ mê°œì˜ ì¸ìë§Œ ë„˜ê²¨ ê¸°ì–µ ì‹œì¼°ë‹¤ê°€, ë‚˜ì¤‘ì— (n-m)ê°œì˜ ì¸ìë¥¼ ë„˜ê¸°ë©´ ë¹„ë¡œì†Œ ì›ë˜ í•¨ìˆ˜ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” í•¨ìˆ˜

**ë””ë°”ìš´ìŠ¤(debounce)**

: ì§§ì€ ì‹œê°„ ë™ì•ˆ ë™ì¼í•œ ì´ë²¤íŠ¸ê°€ ë§ì´ ë°œìƒí•  ê²½ìš° ì´ë¥¼ ì „ë¶€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ì²˜ìŒ ë˜ëŠ” ë§ˆì§€ë§‰ì— ë°œìƒí•œ ì´ë²¤íŠ¸ì— ëŒ€í•´ í•œ ë²ˆë§Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒ!

â‡’ ì„±ëŠ¥ ìµœì í™”ì— í° ë„ì›€ì„ ì£¼ëŠ” ê¸°ëŠ¥

## 5-3-4 ì»¤ë§ í•¨ìˆ˜

---

ì»¤ë§ í•¨ìˆ˜ : ì—¬ëŸ¬ ê°œì˜ ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì˜ ì¸ìë§Œ ë°›ëŠ” í•¨ìˆ˜ë¡œ ë‚˜ëˆ ì„œ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ ì²´ì¸ í˜•íƒœë¡œ êµ¬ì„±í•œ ê²ƒ

â†’ ì»¤ë§ì€ í•œ ë²ˆì— í•˜ë‚˜ì˜ ì¸ìë¥¼ ì „ë‹¬í•˜ëŠ” ì›ì¹™.

> 
> 

```jsx
var curry3 = function (func) {
	return function (a) {
		return function (b) {
			return func(a, b);
		};
	};
};

var getMaxWith10 = curry3(Math.max)(10);
console.log(getMaxWiht10(8)); // 10
console.log(getMaxWiht10(25)); // 25
```

ì¸ìê°€ ë§ìœ¼ë©´ ê°€ë…ì„±ì´ ë–¨ì–´ì§„ë‹¤.

â†’ ì´ëŸ´ë• ES6 ë¬¸ë²•ì— í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ í•œì¤„ì½”ë“œë¡œ ê°€ëŠ¥í•˜ë‹¤.

```jsx
var curry3 = func => a => b => c => func(a,b,c);
```

ğŸ’¡Â **ì»¤ë§ í•¨ìˆ˜**ê°€ ìœ ìš©í•œ ê²½ìš°

ë‹¹ì¥ í•„ìš”í•œ ì •ë³´ë§Œ ë°›ì•„ì„œ ì „ë‹¬í•˜ê³  ë˜ í•„ìš”í•œ ì •ë³´ê°€ ë“¤ì–´ì˜¤ë©´ ì „ë‹¬í•˜ëŠ” ì‹ìœ¼ë¡œ í•˜ë©´ ê²°êµ­ ë§ˆì§€ë§‰ ì¸ìê°€ ë„˜ì–´ê°ˆ ë•Œê¹Œì§€ í•¨ìˆ˜ ì‹¤í–‰ì„ ë¯¸ë£¸ â‡’Â **ì§€ì—°ì‹¤í–‰**